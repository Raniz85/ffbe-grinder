name: Snow Plains
description: Runs the Snow Plains
initialState: Start
states:
    Start:
        transitions:
            Snow Plains Quest Selection:
                type: imageRegion
                name: snow-plains.png
                x: 90
                y: 404
    Snow Plains Quest Selection:
        actions:
            - type: tap
              locations: stageSelect0
        transitions:
            Missions Screen:
                type: imageRegion
                name: missions.png
                x: 223
                y: 337
            Wait For Lapis:
                type: imageRegion
                name: refreshWithLapisButton.png
                x: 394
                y: 612
    Wait For Lapis:
        actions:
            - type: tap
              locations: dontRefreshWithLapis
        transitions:
            # Try again every 30 seconds
            Snow Plains Quest Selection:
                type: time
                delay: PT30S
    Missions Screen:
        actions:
            - type: tap
              locations: missionsNext
        transitions:
            Companion Selection:
                type: time
                delay: PT2S
    Companion Selection:
        actions:
            - type: tap
              locations: [companion0, companion1, companion2, companion3, companion4]
              strategy: random
        transitions:
            Party Selection:
                type: time
                delay: PT2S
    Party Selection:
        actions:
            - type: tap
              locations: depart
        transitions:
            Companion Changed:
                type: imageRegion
                name: companionChanged.png
                x: 106
                y: 611
            Set Up Actions:
                type: imageRegion
                name: autoCombat.png
                x: 5
                y: 1197
    Companion Changed:
        actions:
            - type: tap
              locations: companionChangedOk
        transitions:
            Companion Selection:
                type: time
                delay: PT10S
    Set Up Actions:
        actions:
            # Chizuru, Phantom Shadow
            - type: selectAbility
              character: 0
              ability: 16
            # Ling, Dance of Death
            - type: selectAbility
              character: 1
              ability: 14
            # Lightning, Heat Blitz
            - type: selectAbility
              character: 2
              ability: 11
            # Minfilia, Assault Order
            - type: selectAbility
              character: 3
              ability: 24
              target: character3
            # Emperor, Firaga (No Dualcast support yet)
            - type: selectAbility
              character: 4
              ability: 2
            # Turn on auto attack, this uses their currently selected abilities - this turn
            - type: tap
              locations: autoAttack
            # Turn off auto attack again, so we can mash repeat instead
            - type: tap
              locations: autoAttack
        transitions:
            Repeat Actions:
                type: allActionsExecuted
    Repeat Actions:
        actions:
            - type: tap
              locations: repeatActions
              repeat: true
        transitions:
            Results:
                type: imageRegion
                name: gilResults.png
                x: 213
                y: 500
    Results:
        actions:
            - type: tap
              locations: [center, resultsNext]
        transitions:
            UnitResults:
                type: time
                delay: PT3S
    UnitResults:
        actions:
            - type: tap
              locations: [center, resultsNext]
        transitions:
            Item Results:
                type: time
                delay: PT3S
    Item Results:
        actions:
            - type: tap
              locations: [center, resultsNext]
        transitions:
            Friend Request:
                type: imageRegion
                name: friendRequest.png
                x: 208
                y: 359
            Daily Quest Completed:
                type: imageRegion
                name: dailyQuestCompleted.png
                x: 207
                y: 341
            Snow Plains Quest Selection:
                type: imageRegion
                name: snow-plains.png
                x: 90
                y: 404
    Friend Request:
        actions:
            - type: tap
              locations: dontRequestFriend
        transitions:
            Daily Quest Completed:
                type: imageRegion
                name: dailyQuestCompleted.png
                x: 207
                y: 341
            Snow Plains Quest Selection:
                type: imageRegion
                name: snow-plains.png
                x: 90
                y: 404
    Daily Quest Completed:
        actions:
            - type: tap
              locations: closeDailyQuestButton
        transitions:
            Snow Plains Quest Selection:
                type: imageRegion
                name: snow-plains.png
                x: 90
                y: 404

